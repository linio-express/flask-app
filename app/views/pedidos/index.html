{% extends "/layouts/layout.html" %}
{% block content %}

  <!-- Navbar -->
  {% include '/layouts/_navbar.html' %}

  <!-- Sección de pedidos -->
    <section class="container mx-auto px-4 fade-in">
        <div class="row mt-4">
            <div class="col">
                <h3 style="font-weight: 700;">Mis pedidos</h3>
            </div>
            <div class="col text-right">
                {% if estado == "en_progreso" %}
                    <a href="{{ url_for('pedido_page.index', estado="en_progreso") }}" class="badge badge-pill badge-primary mx-1">
                        <h5 class="pt-2 px-2">En tránsito</h5>
                    </a>
                    <a href="{{ url_for('pedido_page.index', estado="entregado") }}" class="badge badge-pill mx-1">
                        <h5 class="pt-2 px-2">Entregado</h5>
                    </a>
                    <a href="{{ url_for('pedido_page.index', estado="cancelado") }}" class="badge badge-pill mx-1">
                        <h5 class="pt-2 px-2">Cancelado</h5>
                    </a>
                {% elif estado == "entregado" %}
                    <a href="{{ url_for('pedido_page.index', estado="en_progreso") }}" class="badge badge-pill mx-1">
                        <h5 class="pt-2 px-2">En tránsito</h5>
                    </a>
                    <a href="{{ url_for('pedido_page.index', estado="entregado") }}" class="badge badge-pill badge-primary mx-1">
                        <h5 class="pt-2 px-2">Entregado</h5>
                    </a>
                    <a href="{{ url_for('pedido_page.index', estado="cancelado") }}" class="badge badge-pill mx-1">
                        <h5 class="pt-2 px-2">Cancelado</h5>
                    </a>
                {% else %}
                    <a href="{{ url_for('pedido_page.index', estado="en_progreso") }}" class="badge badge-pill mx-1">
                        <h5 class="pt-2 px-2">En tránsito</h5>
                    </a>
                    <a href="{{ url_for('pedido_page.index', estado="entregado") }}" class="badge badge-pill mx-1">
                        <h5 class="pt-2 px-2">Entregado</h5>
                    </a>
                    <a href="{{ url_for('pedido_page.index', estado="cancelado") }}" class="badge badge-pill badge-primary mx-1">
                        <h5 class="pt-2 px-2">Cancelado</h5>
                    </a>
                {% endif %}
            </div>

        </div>
        {% for pedido in pedidos %}
            <div class="card text-dark mt-4">
                <div class="row">
                    <div class="col-md-3 col-sm-2 col-1 my-auto text-center">
                        <i class="fas fa-box-open secondary fa-5x"></i>
                        <h5 class="mt-2 px-3">
                            {{ pedido.estado }}
                        </h5>
                    </div>
                    <div class="col-md-9 col-sm-10 col-11">
                        <div class="row mt-3">
                            <div class="col">
                                <h4 class="" style="font-weight: 600;">Pedido #00000{{ pedido.id }}</h4>
                            </div>
                            <div class="col">
                                <h5 class="text-right mr-4">
                                    {{ pedido.fecha_de_creacion_str }}
                                </h5>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col">
                                <h5 class=""><strong style="color: #737373">Total: </strong>S/ {{ pedido.precio_total_str }}</h5>
                            </div>
                            <div class="col">
                                <h5 class="">
                                    <strong style="color: #737373">Cantidad: </strong>{{ pedido.cantidad_total }}
                                </h5>
                            </div>
                        </div>
                        <h5 class="mt-3">
                            <strong style="color: #737373">Productos:</strong>{{ pedido.productos_str }}
                        </h5>
                        {% if pedido.estado == "Enviado" %}
                            <h5 class="mt-4">
                                <strong style="color: #737373">Fecha de entrega:</strong>Viernes 22 de Diciembre, 2019
                            </h5>
                        {% endif %}
                        <div class="row w-100 text-center mx-auto mt-4 mb-4">
                            <div class="col text-center">
                                <a class="no-underline d-inline-flex text-center w-75 mx-0 px-0" href="register.html">
                                    <button class="btn btn-lg btn-primary btn-block mx-auto w-100"
                                        style="min-width: 200px;">
                                        <strong>Pagar pedido</strong>
                                    </button>
                                </a>
                            </div>
                            <div class="col text-center">
                                <a class="no-underline d-inline-flex text-center w-75 mx-0 px-0" href="{{ url_for('pedido_page.show', id_pedido=pedido.id) }}">
                                    <button class="btn btn-lg btn-outline-secondary btn-block mx-auto w-100"
                                        style="min-width: 200px;">
                                        <strong>Más detalles</strong>
                                    </button>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        {% endfor %}
    </section>

  <!-- Footer -->
  {% include '/layouts/_footer.html' %}

{% endblock %}
